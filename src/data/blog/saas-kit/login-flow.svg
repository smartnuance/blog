<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1179.1667px" preserveAspectRatio="none" style="width:1067px;height:1179px;background:#00000000;" version="1.1" viewBox="0 0 1067 1179" width="1067.7083px" zoomAndPan="magnify"><defs><linearGradient id="g96ym6mxn8a6e0" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#59B6EC"/><stop offset="100%" stop-color="#2FA4E7"/></linearGradient><linearGradient id="g96ym6mxn8a6e1" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#FFFFFF"/><stop offset="100%" stop-color="#F8F9FA"/></linearGradient><linearGradient id="g96ym6mxn8a6e2" x1="50%" x2="50%" y1="0%" y2="100%"><stop offset="0%" stop-color="#35638F"/><stop offset="100%" stop-color="#033C73"/></linearGradient></defs><g><rect fill="#EDF0F2" height="39.5508" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="89.0625" y="151.9857"/><rect fill="#36D39A" height="940.8854" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="282.8125" y="120.7682"/><rect fill="#EDF0F2" height="233.1055" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="569.2708" y="325.8138"/><rect fill="#EDF0F2" height="85.3516" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="569.2708" y="932.5846"/><rect fill="#EDF0F2" height="85.3516" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="934.8958" y="693.1966"/><line style="stroke:#BABDBF;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="93.75" x2="93.75" y1="110.3516" y2="1071.0286"/><line style="stroke:#BABDBF;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="288.0208" x2="288.0208" y1="110.3516" y2="1071.0286"/><line style="stroke:#BABDBF;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="573.9583" x2="573.9583" y1="110.3516" y2="1071.0286"/><line style="stroke:#BABDBF;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="795.8333" x2="795.8333" y1="110.3516" y2="1071.0286"/><line style="stroke:#BABDBF;stroke-width:2.0833333333333335;stroke-dasharray:5.0,5.0;" x1="939.5833" x2="939.5833" y1="110.3516" y2="1071.0286"/><rect fill="url(#g96ym6mxn8a6e0)" height="54.1016" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="94.7917" x="46.875" y="55.2083"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="69.7917" x="59.375" y="79.3111">app server</text><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="37.5" x="75.5208" y="93.8619">(CDN)</text><rect fill="url(#g96ym6mxn8a6e0)" height="54.1016" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="94.7917" x="46.875" y="1069.987"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="69.7917" x="59.375" y="1094.0898">app server</text><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="37.5" x="75.5208" y="1108.6405">(CDN)</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="29.1667" x="270.3125" y="87.6444">user</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="62.5" x="253.6458" y="102.1952">(browser)</text><ellipse cx="288.0208" cy="15.625" fill="#36D39A" rx="8.3333" ry="8.3333" style="stroke:#2FA4E7;stroke-width:2.0833333333333335;"/><path d="M288.0208,23.9583 L288.0208,52.0833 M274.4792,32.2917 L301.5625,32.2917 M288.0208,52.0833 L274.4792,67.7083 M288.0208,52.0833 L301.5625,67.7083 " fill="none" style="stroke:#2FA4E7;stroke-width:2.0833333333333335;"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="29.1667" x="270.3125" y="1086.7981">user</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="62.5" x="253.6458" y="1101.3489">(browser)</text><ellipse cx="288.0208" cy="1119.9219" fill="#36D39A" rx="8.3333" ry="8.3333" style="stroke:#2FA4E7;stroke-width:2.0833333333333335;"/><path d="M288.0208,1128.2552 L288.0208,1156.3802 M274.4792,1136.5885 L301.5625,1136.5885 M288.0208,1156.3802 L274.4792,1172.0052 M288.0208,1156.3802 L301.5625,1172.0052 " fill="none" style="stroke:#2FA4E7;stroke-width:2.0833333333333335;"/><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="105.2083" x="523.9583" y="65.5924"/><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="105.2083" x="519.7917" y="69.7591"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="80.2083" x="532.2917" y="93.8619">auth service</text><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="105.2083" x="523.9583" y="1069.987"/><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="105.2083" x="519.7917" y="1074.1536"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="80.2083" x="532.2917" y="1098.2564">auth service</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="51.0417" x="767.7083" y="102.1952">auth db</text><path d="M777.6042,47.8841 C777.6042,37.4674 796.3542,37.4674 796.3542,37.4674 C796.3542,37.4674 815.1042,37.4674 815.1042,47.8841 L815.1042,74.9674 C815.1042,85.3841 796.3542,85.3841 796.3542,85.3841 C796.3542,85.3841 777.6042,85.3841 777.6042,74.9674 L777.6042,47.8841 " fill="url(#g96ym6mxn8a6e0)" style="stroke:#2FA4E7;stroke-width:1.5625;"/><path d="M777.6042,47.8841 C777.6042,58.3008 796.3542,58.3008 796.3542,58.3008 C796.3542,58.3008 815.1042,58.3008 815.1042,47.8841 " fill="none" style="stroke:#2FA4E7;stroke-width:1.5625;"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="51.0417" x="767.7083" y="1086.7981">auth db</text><path d="M777.6042,1105.3711 C777.6042,1094.9544 796.3542,1094.9544 796.3542,1094.9544 C796.3542,1094.9544 815.1042,1094.9544 815.1042,1105.3711 L815.1042,1132.4544 C815.1042,1142.8711 796.3542,1142.8711 796.3542,1142.8711 C796.3542,1142.8711 777.6042,1142.8711 777.6042,1132.4544 L777.6042,1105.3711 " fill="url(#g96ym6mxn8a6e0)" style="stroke:#2FA4E7;stroke-width:1.5625;"/><path d="M777.6042,1105.3711 C777.6042,1115.7878 796.3542,1115.7878 796.3542,1115.7878 C796.3542,1115.7878 815.1042,1115.7878 815.1042,1105.3711 " fill="none" style="stroke:#2FA4E7;stroke-width:1.5625;"/><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="111.4583" x="886.4583" y="65.5924"/><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="111.4583" x="882.2917" y="69.7591"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="86.4583" x="894.7917" y="93.8619">event service</text><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="111.4583" x="886.4583" y="1069.987"/><rect fill="url(#g96ym6mxn8a6e0)" height="39.5508" rx="4.1667" ry="4.1667" style="stroke:#2FA4E7;stroke-width:1.5625;" width="111.4583" x="882.2917" y="1074.1536"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="86.4583" x="894.7917" y="1098.2564">event service</text><rect fill="#EDF0F2" height="39.5508" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="89.0625" y="151.9857"/><rect fill="#36D39A" height="940.8854" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="282.8125" y="120.7682"/><rect fill="#EDF0F2" height="233.1055" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="569.2708" y="325.8138"/><rect fill="#EDF0F2" height="85.3516" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="569.2708" y="932.5846"/><rect fill="#EDF0F2" height="85.3516" style="stroke:#BABDBF;stroke-width:1.0416666666666667;" width="10.4167" x="934.8958" y="693.1966"/><polygon fill="#2FA4E7" points="110.9375,147.819,100.5208,151.9857,110.9375,156.1523,106.7708,151.9857" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="104.6875" x2="281.7708" y1="151.9857" y2="151.9857"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="122.3958" y="141.746">[A1]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="35.4167" x="165.1042" y="141.746">GET /</text><polygon fill="#2FA4E7" points="270.3125,187.3698,280.7292,191.5365,270.3125,195.7031,274.4792,191.5365" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="94.2708" x2="276.5625" y1="191.5365" y2="191.5365"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="106.7708" y="181.2968">[A2]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="105.2083" x="149.4792" y="181.2968">single-page app</text><rect fill="url(#g96ym6mxn8a6e1)" height="3.125" style="stroke:url(#g96ym6mxn8a6e1);stroke-width:1.0416666666666667;" width="1060.4167" x="0" y="251.9368"/><line style="stroke:#868E96;stroke-width:1.0416666666666667;" x1="0" x2="1060.4167" y1="251.9368" y2="251.9368"/><line style="stroke:#868E96;stroke-width:1.0416666666666667;" x1="0" x2="1060.4167" y1="255.0618" y2="255.0618"/><rect fill="url(#g96ym6mxn8a6e1)" height="33.3008" style="stroke:#868E96;stroke-width:2.0833333333333335;" width="193.75" x="433.3333" y="236.3281"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="164.5833" x="444.7917" y="257.3059">Login with credentials</text><polygon fill="#2FA4E7" points="556.7708,321.6471,567.1875,325.8138,556.7708,329.9805,560.9375,325.8138" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="293.2292" x2="563.0208" y1="325.8138" y2="325.8138"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="305.7292" y="308.2987">[B1]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="83.3333" x="348.4375" y="301.0234">POST /login</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="123.9583" x="348.4375" y="315.5741">(email, password)</text><polygon fill="#2FA4E7" points="783.8542,361.1979,794.2708,365.3646,783.8542,369.5313,788.0208,365.3646" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="579.6875" x2="790.1042" y1="365.3646" y2="365.3646"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="592.1875" y="355.1249">[B2]</text><text fill="#343A40" font-family="monospace" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="123.9583" x="634.8958" y="355.1249">GetProfile().Role</text><polygon fill="#2FA4E7" points="591.1458,400.7487,580.7292,404.9154,591.1458,409.082,586.9792,404.9154" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="584.8958" x2="795.3125" y1="404.9154" y2="404.9154"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="602.6042" y="394.6757">[B3]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="105.2083" x="645.3125" y="394.6757">profile data with</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="29.1667" x="754.6875" y="394.6757">role</text><path d="M413.5417,422.6237 L413.5417,477.832 A4.1667,4.1667 0 0 0 417.7083,481.9987 L731.25,481.9987 A4.1667,4.1667 0 0 0 735.4167,477.832 L735.4167,428.8737 L725,418.457 L417.7083,418.457 A4.1667,4.1667 0 0 0 413.5417,422.6237 " fill="url(#g96ym6mxn8a6e2)" style="stroke:#033C73;stroke-width:1.0416666666666667;"/><path d="M725,418.457 L725,426.7904 A2.0833,2.0833 0 0 0 727.0833,428.8737 L735.4167,428.8737 L725,418.457 " fill="url(#g96ym6mxn8a6e2)" style="stroke:#033C73;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="161.4583" x="425" y="440.4765">Create tokens (JWTs with</text><text fill="#FFFFFF" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="590.625" y="440.4765">&lt;role&gt;</text><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="76.0417" x="638.5417" y="440.4765">in payload):</text><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="67.7083" x="425" y="455.0273">short-lived</text><text fill="#FFFFFF" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="80.2083" x="496.875" y="455.0273">accessToken</text><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="61.4583" x="425" y="469.578">long-lived</text><text fill="#FFFFFF" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="87.5" x="490.625" y="469.578">refreshToken</text><polygon fill="#2FA4E7" points="783.8542,515.2018,794.2708,519.3685,783.8542,523.5352,788.0208,519.3685" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="579.6875" x2="790.1042" y1="519.3685" y2="519.3685"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="592.1875" y="509.1288">[B4]</text><text fill="#343A40" font-family="monospace" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="138.5417" x="634.8958" y="509.1288">Store(refreshToken)</text><polygon fill="#2FA4E7" points="304.6875,554.7526,294.2708,558.9193,304.6875,563.0859,300.5208,558.9193" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="298.4375" x2="573.4375" y1="558.9193" y2="558.9193"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="316.1458" y="548.6796">[B5]</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="196.875" x="358.8542" y="548.6796">(accessToken, refreshToken)</text><rect fill="url(#g96ym6mxn8a6e1)" height="3.125" style="stroke:url(#g96ym6mxn8a6e1);stroke-width:1.0416666666666667;" width="1060.4167" x="0" y="619.3197"/><line style="stroke:#868E96;stroke-width:1.0416666666666667;" x1="0" x2="1060.4167" y1="619.3197" y2="619.3197"/><line style="stroke:#868E96;stroke-width:1.0416666666666667;" x1="0" x2="1060.4167" y1="622.4447" y2="622.4447"/><rect fill="url(#g96ym6mxn8a6e1)" height="33.3008" style="stroke:#868E96;stroke-width:2.0833333333333335;" width="151.0417" x="454.6875" y="603.7109"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="121.875" x="466.1458" y="624.6887">Fetch Resources</text><polygon fill="#2FA4E7" points="922.3958,689.0299,932.8125,693.1966,922.3958,697.3633,926.5625,693.1966" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="293.2292" x2="928.6458" y1="693.1966" y2="693.1966"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="305.7292" y="675.6816">[C1]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="116.6667" x="348.4375" y="668.4062">GET /workshops</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="255.2083" x="348.4375" y="682.9569">Authorization:"Bearer &lt;accessToken&gt;</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="5.2083" x="603.6458" y="682.9569">"</text><path d="M847.9167,710.9049 L847.9167,736.9466 A4.1667,4.1667 0 0 0 852.0833,741.1133 L1028.125,741.1133 A4.1667,4.1667 0 0 0 1032.2917,736.9466 L1032.2917,717.1549 L1021.875,706.7383 L852.0833,706.7383 A4.1667,4.1667 0 0 0 847.9167,710.9049 " fill="url(#g96ym6mxn8a6e2)" style="stroke:#033C73;stroke-width:1.0416666666666667;"/><path d="M1021.875,706.7383 L1021.875,715.0716 A2.0833,2.0833 0 0 0 1023.9583,717.1549 L1032.2917,717.1549 L1021.875,706.7383 " fill="url(#g96ym6mxn8a6e2)" style="stroke:#033C73;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="53.125" x="859.375" y="728.7577">Validate</text><text fill="#FFFFFF" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="94.7917" x="916.6667" y="728.7577">&lt;accessToken&gt;</text><polygon fill="#2FA4E7" points="304.6875,774.3815,294.2708,778.5482,304.6875,782.7148,300.5208,778.5482" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="298.4375" x2="939.0625" y1="778.5482" y2="778.5482"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="316.1458" y="768.3085">[C2]</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="65.625" x="358.8542" y="768.3085">workshops</text><path d="M242.1875,820.2148 L441.1458,820.2148 L441.1458,835.8398 L430.7292,846.2565 L238.0208,846.2565 L238.0208,824.3815 A4.1667,4.1667 0 0 1 242.1875,820.2148 " fill="#E9ECEF" style="stroke:#868E96;stroke-width:1.0416666666666667;"/><rect fill="none" height="233.1055" rx="4.1667" ry="4.1667" style="stroke:#868E96;stroke-width:2.0833333333333335;" width="811.9792" x="238.0208" y="820.2148"/><text fill="#033C73" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="145.8333" x="258.8542" y="838.0676">case: token expired</text><line style="stroke:#2FA4E7;stroke-width:2.0833333333333335;" x1="921.3542" x2="931.7708" y1="887.8255" y2="898.2422"/><line style="stroke:#2FA4E7;stroke-width:2.0833333333333335;" x1="921.3542" x2="931.7708" y1="898.2422" y2="887.8255"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="293.2292" x2="926.5625" y1="893.0339" y2="893.0339"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="305.7292" y="875.5188">[C3]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="116.6667" x="348.4375" y="868.2434">GET /workshops</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="255.2083" x="348.4375" y="882.7942">Authorization:"Bearer &lt;accessToken&gt;</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="5.2083" x="603.6458" y="882.7942">"</text><polygon fill="#2FA4E7" points="556.7708,928.418,567.1875,932.5846,556.7708,936.7513,560.9375,932.5846" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="293.2292" x2="563.0208" y1="932.5846" y2="932.5846"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="305.7292" y="922.345">[C4]</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="96.875" x="348.4375" y="922.345">POST refresh</text><text fill="#343A40" font-family="monospace" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="102.0833" x="449.4792" y="922.345">&lt;refreshToken&gt;</text><path d="M437.5,950.293 L437.5,976.3346 A4.1667,4.1667 0 0 0 441.6667,980.5013 L707.2917,980.5013 A4.1667,4.1667 0 0 0 711.4583,976.3346 L711.4583,956.543 L701.0417,946.1263 L441.6667,946.1263 A4.1667,4.1667 0 0 0 437.5,950.293 " fill="url(#g96ym6mxn8a6e2)" style="stroke:#033C73;stroke-width:1.0416666666666667;"/><path d="M701.0417,946.1263 L701.0417,954.4596 A2.0833,2.0833 0 0 0 703.125,956.543 L711.4583,956.543 L701.0417,946.1263 " fill="url(#g96ym6mxn8a6e2)" style="stroke:#033C73;stroke-width:1.0416666666666667;"/><text fill="#FFFFFF" font-family="DejaVu Sans" font-size="12.5" lengthAdjust="spacing" textLength="157.2917" x="448.9583" y="968.1458">Create fresh, short-lived</text><text fill="#FFFFFF" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="80.2083" x="610.4167" y="968.1458">accessToken</text><polygon fill="#2FA4E7" points="304.6875,1013.7695,294.2708,1017.9362,304.6875,1022.1029,300.5208,1017.9362" style="stroke:#2FA4E7;stroke-width:1.0416666666666667;"/><line style="stroke:#2FA4E7;stroke-width:3.125;" x1="298.4375" x2="573.4375" y1="1017.9362" y2="1017.9362"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="28.125" x="316.1458" y="1007.6965">[C5]</text><text fill="#343A40" font-family="monospace" font-size="12.5" lengthAdjust="spacing" textLength="80.2083" x="358.8542" y="1007.6965">accessToken</text><line style="stroke:#868E96;stroke-width:1.0416666666666667;stroke-dasharray:2.0,2.0;" x1="238.0208" x2="1050" y1="1027.3112" y2="1027.3112"/><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="120.8333" x="248.4375" y="1044.1223">[retry with fresh</text><text fill="#343A40" font-family="monospace" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="80.2083" x="373.4375" y="1044.1223">accessToken</text><text fill="#343A40" font-family="DejaVu Sans" font-size="12.5" font-weight="bold" lengthAdjust="spacing" textLength="5.2083" x="453.6458" y="1044.1223">]</text><!--MD5=[6fe76c4d2da22a16889ef95d7d107512]
@startuml
!include https://raw.githubusercontent.com/bschwarz/puml-themes/master/themes/cerulean/puml-theme-cerulean.puml
skinparam DefaultFontName DejaVu Sans

participant "app server\n(CDN)" as cdn
actor "user\n(browser)" as user #36d39a
collections "auth service" as auth
database "auth db" as db
collections "event service" as event

autonumber 1 1 "<b>[A0]"
activate user #36d39a
user -> cdn ++: <b>GET /
user <- cdn - -: single-page app

|||

== Login with credentials ==

autonumber 1 1 "<b>[B0]"
user -> auth ++: <b>POST /login\n""(email, password)""
auth -> db : ""<b>GetProfile().Role""
auth <- db : profile data with ""role""
note over auth : Create tokens (JWTs with ""<role>"" in payload):\nshort-lived ""accessToken""\nlong-lived ""refreshToken""
auth -> db : <b>""Store(refreshToken)""
user <- auth - -: ""(accessToken, refreshToken)""

|||

== Fetch Resources ==

autonumber 1 1 "<b>[C0]"
user -> event ++ : <b>GET /workshops\n""Authorization:"Bearer <accessToken>"""
note over event : Validate ""<accessToken>""
user <- event - -: ""workshops"" 

|||

group case: token expired

    user ->x event : <b>GET /workshops\n""Authorization:"Bearer <accessToken>"""
    user -> auth ++ : <b>POST refresh ""<refreshToken>""
    note over auth : Create fresh, short-lived ""accessToken""
    user <- auth - -: ""accessToken""

else retry with fresh ""accessToken""
end
@enduml

@startuml



skinparam backgroundColor transparent
skinparam useBetaStyle false







skinparam defaultFontName        "Verdana"
skinparam defaultFontSize        12
skinparam dpi                    100
skinparam shadowing              false
skinparam roundcorner            8
skinparam ParticipantPadding     40
skinparam BoxPadding             40
skinparam Padding                5
skinparam ArrowColor             #868E96
skinparam stereotype {
    CBackgroundColor #EDF0F2
    CBorderColor #BABDBF
    ABackgroundColor #8FB961
    ABorderColor #5C862E
    IBackgroundColor #D2494E
    IBorderColor #9F161B
    EBackgroundColor #E47833
    EBorderColor #B14500
    NBackgroundColor #35638F
    NBorderColor #02305C
}
skinparam title {
	FontColor	                 #2FA4E7
	BorderColor	                 #BABDBF
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              #EDF0F2-#E9ECEF
}


skinparam legend {
	BackgroundColor #E9ECEF
	BorderColor #BABDBF
	FontColor #343A40
}

skinparam swimlane {
	BorderColor #033C73
	BorderThickness 2
	TitleBackgroundColor  #EDF0F2-#E9ECEF
	TitleFontColor #2FA4E7
}


skinparam activity {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	BarColor #73A839
	StartColor #033C73
	EndColor #033C73
	DiamondBackgroundColor #FFF-#EDF0F2
  	DiamondBorderColor #BABDBF
	DiamondFontColor #343A40
}


skinparam participant {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	FontColor #343A40
}


skinparam arrow {
	Thickness 3
	Color #2FA4E7
	FontColor #343A40
}


skinparam sequence {
	BorderColor #2FA4E7
	TitleFontColor #2FA4E7
	BackgroundColor transparent
	StartColor #2FA4E7
	EndColor #2FA4E7
	BoxBackgroundColor transparent
	BoxBorderColor #868E96
	BoxFontColor #343A40
	DelayFontColor #343A40
	LifeLineBorderColor #BABDBF
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #EDF0F2
	GroupBorderColor #868E96
	GroupFontColor #343A40
	GroupHeaderFontColor #033C73
	GroupBackgroundColor #E9ECEF
	GroupBodyBackgroundColor transparent
	GroupHeaderBackgroundColor transparent
	DividerBackgroundColor #FFF-#F8F9FA
    DividerBorderColor #868E96
    DividerBorderThickness 2
    DividerFontColor #343A40
	ReferenceBackgroundColor transparent
	ReferenceBorderColor #868E96
	ReferenceFontColor #343A40
	ReferenceHeaderFontColor #033C73
	StereotypeFontColor #FFF
}


skinparam partition {
	BorderColor #2FA4E7
	FontColor #2FA4E7
	BackgroundColor transparent
}


skinparam collections {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
}


skinparam control {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	FontColor #343A40
}


skinparam entity {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	FontColor #343A40
}


skinparam boundary {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	FontColor #343A40
}


skinparam agent {
	BackgroundColor #orange
	BorderColor #999999
	FontColor #333333
}


skinparam note {
	BorderThickness 1
	BackgroundColor #35638F-#033C73
	BorderColor #033C73
	FontColor #FFF
}


skinparam artifact {
	BackgroundColor #FFF-#F8F9FA
	BorderColor #BABDBF
	FontColor #343A40
}


skinparam component {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
}


skinparam interface {
	BackgroundColor  #D2494E
	BorderColor  #C71C22
	FontColor #343A40
}


skinparam storage {
	BackgroundColor #E47833-#DD5600
  	BorderColor #DD5600
	FontColor #FFF
}


skinparam node {
	BackgroundColor #EDF0F2-#E9ECEF
	BorderColor #E9ECEF
	FontColor #343A40
}


skinparam cloud {
	BackgroundColor transparent
	BorderColor #F2FCFE
	FontColor #2FA4E7
}


skinparam database {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	FontColor #343A40
}


skinparam class {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	HeaderBackgroundColor #2FA4E7-#2683B9
	StereotypeFontColor #343A40
	BorderThickness 1
	AttributeFontColor #F8F9FA
	AttributeFontSize 11
}


skinparam object {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	StereotypeFontColor #343A40
	BorderThickness 1
	AttributeFontColor #343A40
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam rectangle {
	FontColor #2FA4E7
	BorderColor #59B6EC
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #2FA4E7
}


skinparam package {
	FontColor #2FA4E7
	BorderColor #59B6EC
	BackgroundColor transparent
	BorderThickness 2
}


skinparam folder {
	BackgroundColor #FFF-#EDF0F2
  	BorderColor #DD5600
	FontColor #DD5600
	BorderThickness 2
}


skinparam frame {
	BackgroundColor #FFF-#EDF0F2
  	BorderColor #033C73
	FontColor #033C73
	BorderThickness 2
}


skinparam state {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
	BorderColor #2683B9
	StartColor #033C73
	EndColor #033C73
	AttributeFontColor #343A40
	AttributeFontSize 11
}


skinparam queue {
		FontColor #FFF
	BorderColor #2FA4E7
	BackgroundColor #59B6EC-#2FA4E7
}


skinparam card {
	BackgroundColor #35638F-#033C73
	BorderColor #033C73
	FontColor #FFF
}


skinparam file {
	BackgroundColor #EDF0F2-#E9ECEF
	BorderColor #033C73
	FontColor #868E96

}


skinparam DefaultFontName DejaVu Sans

participant "app server\n(CDN)" as cdn
actor "user\n(browser)" as user #36d39a
collections "auth service" as auth
database "auth db" as db
collections "event service" as event

autonumber 1 1 "<b>[A0]"
activate user #36d39a
user -> cdn ++: <b>GET /
user <- cdn - -: single-page app

|||

== Login with credentials ==

autonumber 1 1 "<b>[B0]"
user -> auth ++: <b>POST /login\n""(email, password)""
auth -> db : ""<b>GetProfile().Role""
auth <- db : profile data with ""role""
note over auth : Create tokens (JWTs with ""<role>"" in payload):\nshort-lived ""accessToken""\nlong-lived ""refreshToken""
auth -> db : <b>""Store(refreshToken)""
user <- auth - -: ""(accessToken, refreshToken)""

|||

== Fetch Resources ==

autonumber 1 1 "<b>[C0]"
user -> event ++ : <b>GET /workshops\n""Authorization:"Bearer <accessToken>"""
note over event : Validate ""<accessToken>""
user <- event - -: ""workshops"" 

|||

group case: token expired

    user ->x event : <b>GET /workshops\n""Authorization:"Bearer <accessToken>"""
    user -> auth ++ : <b>POST refresh ""<refreshToken>""
    note over auth : Create fresh, short-lived ""accessToken""
    user <- auth - -: ""accessToken""

else retry with fresh ""accessToken""
end
@enduml

PlantUML version 1.2021.14(Fri Nov 12 16:46:50 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>